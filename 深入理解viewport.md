# 移动端适配系列 —— Viewport #

viewport, 平常想到的最多是，meta的viewport属性，和media query中对不同设备宽度的样式适配，这些都是和设备视口有关。

## 为什么需要理解viewport？ ##

光是知道用meta的viewport属性，和媒体查询去实现一些布局适配，很多时候我们不能尽善尽美的实现需求，而且很多时候为了不同尺寸的设备，适配方案可能繁复，所以一方面是提高自我的技术实力，也是为了应对更多各种场景，可以信手拈来好的解决方案。

## 在介绍viewport之前，还需要知道的 ##

我们都知道，现在更多的移动端适配布局方案，使用一套标准尺寸设备界面然后使用rem布局，这样针对不同的分辨率以及高清屏，前端页面都可以很好的展示。（针对全面屏设备，是一种额外的情况，再此暂且不提）

### rem布局 ###

rem是css3提出的一个新单位，它和em有些类似，只不过，em是根据当前元素的字体尺寸来计算，而rem是根据root节点的字体尺寸来计算，这样在不同的设备上，只要设置不同的HTML根节点**`font-size`**，就可以保证等比的界面显示。

那么，在rem未出世前，之前的前辈们，又是如何做移动端适配的呢？（其实这么说不太恰当，css3诞生前，智能设备还未大面积普及，所以以前的界面设配场景也没有像现在这样复杂）

- js动态计算，获取屏幕可视区域宽度，然后应用不同的px宽度或百分比布局。
- 或者运用类似**bootstrap**这样的三方库实现了类似flex布局的弹性布局

但是以上这些方案，都有或多或少的弊端。因为开发者不可能知道所有的设备尺寸类型，总会有无法兼顾的。

### CSS长度单位 ###

很多时候，我们大概只会用到px，百分比，em，rem，vw，vh这些常用的单位。

但是css长度单位远不止这几样，只不过有些单位不适合在网页中应用，所以极少出现，

in(英寸)，cm(厘米)，mm(毫米)，pt(磅)，pc(pica)均是打印中比较常用的单位，暂且不谈。


### 屏幕相关 ###

屏幕尺寸：屏幕对角线的长度，单位是英寸，尺寸从:2.0，2.8，3.5，3.7，4.5，5.0，5.5，到6.0不等。

屏幕分辨率：横纵方向的像素点。单位是px，1px = 1像素点。（指物理设备的一个像素点，有时和css的px并不相等）

屏幕像素密度：每英寸的像素点数，单位ppi。（dpi和ppi在移动设备上实际为同一概念）

密度独立像素：dp/dip，使在不同设备上看起来效果一样。

**屏幕划分标准**

google为区分不同设备设定了这样一套：

* ldpi 是指 < 120dpi
* mdpi 是指 120dpi~160dpi
* hdpi 是指 160dpi~240dpi
* xhdpi 是指 240~320dpi
* xxhdpi 是指 360~480dpi
* xxxhdpi 是指 480~640dpi

苹果则分为non-retina，retina，retina HD

数值上：

480*320px 163ppi mdpi @1x
750*1334px 326ppi xhdpi @2x
1242*2208px 401ppi xxhdpi @3x

## 主角：viewport ##

在移动设备上，页面是在一个虚拟视口（viewport）里的，可能大于或小于可视区域，一般默认是大于。

这时，在html中的meta元标签中的viewport就发生作用了，网页上的css的px单位就和viewport产生了联系，按照viewport的大小进行划分，每一份就是px。如果这时meta viewport的width设置为等于device-width，那么此时的物理像素和css的px就是一对一的关系。

如果未设置viewport的情况下，一般都是980，至于为什么大多数设备的默认视口宽度是980，这是一个历史原因。

